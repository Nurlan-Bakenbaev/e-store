(()=>{var e={};e.id=5,e.ids=[5],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},5041:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(260),a=s(8203),n=s(5155),i=s.n(n),l=s(7292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3232)),"/Users/bakenbaevFamily/Desktop/My Job/e-store/frontend/src/app/cart/page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5421)),"/Users/bakenbaevFamily/Desktop/My Job/e-store/frontend/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/Users/bakenbaevFamily/Desktop/My Job/e-store/frontend/src/app/cart/page.jsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5393:(e,t,s)=>{Promise.resolve().then(s.bind(s,3232))},4721:(e,t,s)=>{Promise.resolve().then(s.bind(s,9793))},9793:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var r,a=s(5512),n=s(8009),i=s(6667),l=s(1680);let o=(0,l.A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var c=s(5103),d=s(8531),m=s.n(d),x=s(4412),u=s(4849);let p=({cart:e,decrementItemQuantity:t,deleteItemFromCart:s,incrementItemQuantity:r,isLoadingId:i})=>{let{getCartItems:l}=(0,u.x)();return(0,n.useEffect)(()=>{0===e.quantity&&s(e),l()},[e.quantity,s,l,e]),(0,a.jsxs)("div",{className:"relative rounded-lg p-4 mb-2 shadow-sm bg-slate-800 md:p-6",children:[(0,a.jsxs)("div",{className:"space-y-2 md:flex md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,a.jsx)(m(),{href:"#",className:"w-20",children:(0,a.jsx)(c.default,{width:100,height:100,className:"max-h-50 max-w-30",src:e.image,alt:"image of iPhone",style:{objectFit:"cover",objectPosition:"center"}})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("h5",{className:"text-md",children:e.name})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between md:justify-end",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>t(e),type:"button",className:"hover:bg-slate-700 h-10 w-10 items-center justify-center rounded-md border border-slate-700",children:"-"}),(0,a.jsx)("input",{type:"text",className:"w-10 border-0 bg-transparent text-center text-sm font-medium focus:outline-none focus:ring-0",value:e.quantity,readOnly:!0}),(0,a.jsx)("button",{onClick:()=>r(e),type:"button",className:"hover:bg-slate-700 h-10 w-10 items-center justify-center rounded-md border border-slate-700",children:"+"})]}),(0,a.jsx)("div",{className:"text-end md:w-32",children:(0,a.jsxs)("p",{className:"text-base font-bold ",children:["$",e.price]})})]})]}),(0,a.jsx)("button",{onClick:()=>s(e),type:"button",className:"text-red-600  hover:text-red-700 absolute top-3 right-5",children:i&&e._id?(0,a.jsx)(x.A,{}):(0,a.jsx)(o,{size:20})})]})};var h=s(6559),f="https://js.stripe.com/v3",j=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,v=function(){for(var e=document.querySelectorAll('script[src^="'.concat(f,'"]')),t=0;t<e.length;t++){var s=e[t];if(j.test(s.src))return s}return null},y=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(f).concat(t);var r=document.head||document.body;if(!r)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(s),s},g=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.2.0",startTime:t})},b=null,w=null,N=null,k=function(e,t,s){if(null===e)return null;var r=e.apply(void 0,t);return g(r,s),r},P=!1,A=function(){return r||(r=(null!==b?b:(b=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var s,r=v();r?r&&null!==N&&null!==w&&(r.removeEventListener("load",N),r.removeEventListener("error",w),null===(s=r.parentNode)||void 0===s||s.removeChild(r),r=y(null)):r=y(null),N=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},w=function(){t(Error("Failed to load Stripe.js"))},r.addEventListener("load",N),r.addEventListener("error",w)}catch(e){t(e);return}})).catch(function(e){return b=null,Promise.reject(e)})).catch(function(e){return r=null,Promise.reject(e)}))};Promise.resolve().then(function(){return A()}).catch(function(e){P||console.warn(e)});var q=s(2850);let C=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];P=!0;var r=Date.now();return A().then(function(e){return k(e,t,r)})}("pk_test_51QU2T5KY7H7Lk4EThg0mHeBbjATWMJJXrU29WxfKFmYLroSaFJyp2GJAADVMGkXKFgFTLmhy5PzYk17dnNT81iJG00354ogQjh"),E=()=>{let{cart:e,coupon:t,subtotal:s,total:r}=(0,u.x)(),n=async()=>{try{let s=await C;if(!s)throw Error("Stripe failed to initialize. Please try again later.");if(!Array.isArray(e)||0===e.length)throw Error("Your cart is empty. Please add products to proceed.");let r=(await q.A.post("/payments/create-checkout-session",{products:e,couponCode:t?t?.code:null})).data;if(!r.id)throw Error("Failed to create a checkout session. Please try again.");let{error:a}=await s.redirectToCheckout({sessionId:r.id});a&&alert("There was an issue redirecting to the payment page. Please try again.")}catch(e){alert(e.message)}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-4 rounded-lg  bg-slate-800 p-4 shadow-sm  sm:p-6",children:[(0,a.jsx)("p",{className:"text-xl font-semibold ",children:"Order summary"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("dl",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("dt",{className:"text-base font-normal text-gray-400",children:"Original price"}),(0,a.jsxs)("dd",{className:"text-base font-medium text-white",children:["$",s]})]}),(0,a.jsxs)("dl",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("dt",{className:"text-base font-normal text-gray-400",children:"Discount"}),(0,a.jsx)("dd",{className:"text-base font-medium text-green-600",children:t})]})]}),(0,a.jsxs)("dl",{className:"flex items-center justify-between gap-4 border-t pt-2 border-slate-900",children:[(0,a.jsx)("dt",{className:"text-lg font-bold",children:"Total"}),(0,a.jsxs)("dd",{className:"text-lg font-bold underline underline-offset-8",children:["$",r]})]})]}),(0,a.jsx)(h.A,{variant:"contained",color:"success",onClick:n,href:"#",className:"flex  w-full items-center justify-center hover:text-accent  py-2 text-sm ",children:"Proceed to Checkout"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-normal text-gray-400",children:"or"}),(0,a.jsx)(m(),{href:"/",className:"inline-flex items-center gap-2  hover:text-accent",children:"Continue Shopping"})]})]})})};var _=s(1124);let F=(0,l.A)("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]),S=()=>(0,a.jsx)("div",{className:"flex justify-center items-center mt-12 ",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(_.A,{size:150,className:"mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Your Cart is Empty"}),(0,a.jsxs)(m(),{href:"/",className:"mt-3 hover:scale-105 flex items-center gap-2 text-accent",children:["Start shopping ",(0,a.jsx)(F,{})]})]})});var M=s(4564);let $=()=>{let{updateQuantity:e,addToCart:t,deleteFromCart:s,cart:r,coupon:l,total:o,subtotal:c,getCartItems:d,isLoadingId:m,recomendations:x,fetchRecomendation:h}=(0,u.x)();(0,n.useEffect)(()=>{d(),h()},[r.quantity,d,h]);let f=e=>{t(e)},j=t=>{e(t)},v=async e=>{await s(e),d()};return(0,a.jsxs)("div",{children:[(0,a.jsx)(i.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2,ease:"easeInOut"},children:(0,a.jsx)("h1",{className:"text-xl md:text-4xl mb-5 text-center capitalize",children:"Shopping Cart"})}),(0,a.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4,ease:"easeInOut"},className:"flex flex-col md:flex-row gap-4 lg:max-w-[90%] lg:mx-auto justify-center px-4",children:0===r.length?(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(S,{})}):(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"w-full max-w-2xl mx-auto",children:r.map((e,t)=>(0,a.jsx)(p,{cart:e,incrementItemQuantity:f,decrementItemQuantity:j,deleteItemFromCart:v,isLoadingId:m},t))}),(0,a.jsx)("div",{className:"w-full max-w-xl md:max-w-lg mx-auto flex flex-col gap-4",children:(0,a.jsx)(E,{coupon:l,total:o,subtotal:c})})]}),(0,a.jsxs)("div",{className:"hidden xl:mt-8 md:block",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-center mt-8",children:"People also bought"}),(0,a.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-5 overflow-auto max-w-2xl",children:x.recommendations?.map((e,t)=>a.jsx(M.A,{product:e,index:t,size:"small"},t))})]})]})})]})}},4564:(e,t,s)=>{"use strict";s.d(t,{A:()=>j});var r=s(5512),a=s(8009),n=s(6559),i=s(5529),l=s(6951),o=s(4305),c=s(617),d=s(1124),m=s(5103),x=s(6667),u=s(4097),p=s(2206),h=s(4750),f=s(4849);let j=({product:e,index:t,size:s})=>{let[j,v]=(0,a.useState)(!1),[y,g]=(0,a.useState)(!0),{addToCart:b,getCartItems:w}=(0,f.x)(),{user:N}=(0,p.k)(),[k,P]=(0,a.useState)(!0),A=async e=>{P(!0),N||h.oR.error("Please login to add to cart"),await b(e),h.oR.success("Product added to cart",{autoClose:4e3}),w()};return(0,a.useEffect)(()=>{N&&P(N?.cartItems.some(t=>t.product.toString()===e._id)),w()},[N?.cartItems,e?._id,w,N]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.P.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{delay:.2*t,duration:.5}}},initial:"hidden",animate:"visible",className:`bg-slate-800 overflow-hidden  hover:bg-slate-700 py-4 rounded-md 
        shadow-md  ${s?"max-w-xs":" max-w-md min-w-[120px]"} flex flex-col 
        sm:flex-${s?"col":"row"} items-center gap-4 group`,children:[(0,r.jsx)("div",{onClick:()=>{v(!0)},className:"cursor-pointer",children:(0,r.jsx)(m.default,{height:180,width:320,src:e.image,alt:"photo of "+e.name,className:`group-hover:scale-105 duration-300 ease-in-out ${s?"w-[180px] h-[180px]":"min-w-[180px] max-h-[320px]"} object-cover`})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 p-2",children:[(0,r.jsx)("h3",{className:`text-${s?"md":"lg"} font-semibold text-white`,children:e.name}),!s&&(0,r.jsxs)("span",{className:"capitalize text-gray-400",children:["Category: ",e.category]}),s?"":(0,r.jsxs)("div",{className:"text-gray-400",children:["Description:",(0,r.jsx)("div",{onClick:()=>{g(!y)},className:"text-sm text-gray-200 cursor-pointer",children:y?(0,r.jsxs)(r.Fragment,{children:[(0,u.E)(e.description,100),(0,r.jsx)("span",{className:"text-accent",children:"read more"})]}):e.description})]}),(0,r.jsx)("div",{className:"w-full h-[1px] bg-gray-500 my-2"}),(0,r.jsxs)("p",{className:`text-${s?"sm":"lg"} font-bold  text-right`,children:[(0,r.jsx)("span",{children:"Price:"}),(0,r.jsxs)("span",{children:[" $",e.price.toFixed(2)]})]}),(0,r.jsx)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:e.isFeatured&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-yellow-500",children:[(0,r.jsx)(c.A,{size:16})," ",(0,r.jsx)("span",{children:"Featured"})]})}),(0,r.jsx)("div",{className:"flex items-center justify-between mt-auto",children:(0,r.jsxs)(n.A,{onClick:()=>{A(e)},variant:"contained",color:"success",className:`flex items-center gap-2 text-${s?"sm":"md"} `,children:[(0,r.jsx)(d.A,{size:18}),k?"Added to cart":"Add to cart"]})})]})]}),(0,r.jsxs)(i.A,{open:j,onClose:()=>{v(!1)},fullWidth:!0,maxWidth:"sm",PaperProps:{style:{color:"black",borderRadius:"10px",overflow:"hidden"}},children:[(0,r.jsxs)(l.A,{children:["Product title : ",e.name]}),(0,r.jsx)(o.A,{children:(0,r.jsx)("div",{className:"flex flex-col items-center",children:(0,r.jsx)(m.default,{height:500,width:500,src:e.image,alt:"photo of "+e.name,className:"rounded-md"})})})]})]})}},4412:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(5512);s(8009);let a=({size:e="sm",color:t="text-white"})=>(0,r.jsx)("div",{className:`inline-block animate-spin rounded-full border-2 border-solid border-current border-r-transparent ${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[e]} ${t}`,role:"status"})},4097:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});let r=(e,t)=>e?.length>t?e.substring(0,t)+"... ":e},3232:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/bakenbaevFamily/Desktop/My Job/e-store/frontend/src/app/cart/page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/bakenbaevFamily/Desktop/My Job/e-store/frontend/src/app/cart/page.jsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[859,259,933],()=>s(5041));module.exports=r})();