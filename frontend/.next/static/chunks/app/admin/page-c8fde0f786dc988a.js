(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5414:(e,a,t)=>{Promise.resolve().then(t.bind(t,5102))},5102:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>k});var s=t(5155),r=t(2115),l=t(9675),d=t(6394),i=t(4807),o=t(9647),c=t(1068),n=t(5619);let u=()=>{let[e,a]=(0,r.useState)({name:"",description:"",price:"",category:"",image:"",isFeatured:!1}),{createProduct:t,loading:d}=(0,o.z)(),u=t=>{let{name:s,value:r,type:l,checked:d}=t.target;a({...e,[s]:"checkbox"===l?d:r})},g=async s=>{s.preventDefault();try{await t(e),a({name:"",description:"",price:"",category:"",image:"",isFeatured:!1})}catch(e){var r,l;console.log(e),c.oR.error((null===(l=e.response)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r.message)||"Product creation failed")}};return(0,s.jsx)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5,ease:"easeInOut"},className:"w-full max-w-lg mx-auto bg-slate-800 p-5 shadow-lg ",children:(0,s.jsxs)("form",{onSubmit:g,className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Product name"}),(0,s.jsx)("input",{autoFocus:!0,type:"text",name:"name",value:e.name,onChange:u,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Description"}),(0,s.jsx)("textarea",{spellCheck:"true",maxLength:500,name:"description",rows:"4",cols:"50",value:e.description,onChange:u,className:"w-full bg-transparent border p-2",required:!0}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[e.description.length,"/500"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{children:[(0,s.jsx)(i.A,{size:15})," Price"]}),(0,s.jsx)("input",{type:"number",step:"0.01",name:"price",value:e.price,onChange:u,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"category",children:"Category:"}),(0,s.jsxs)("select",{className:"w-full bg-transparent",name:"category",id:"category",value:e.category,onChange:u,required:!0,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),n.Q.map(e=>(0,s.jsx)("option",{value:e.cat,children:e.cat},e.cat))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"img_input",children:"Image:"}),(0,s.jsx)("input",{id:"img_input",type:"file",accept:"image/*",name:"image",onChange:t=>{let s=t.target.files[0];if(s){let t=new FileReader;t.onloadend=()=>{a({...e,image:t.result})},t.readAsDataURL(s)}},className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",required:!0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",name:"isFeatured",checked:e.isFeatured,onChange:u,className:"h-4 w-4 text-gray-600 focus:ring-gray-500  rounded"}),(0,s.jsx)("label",{className:"".concat(e.isFeatured&&"text-accent"),children:"Featured Product"})]}),(0,s.jsx)("button",{type:"submit",className:"w-full text-sm py-2 px-4 rounded-md bg-blue-600 hover:bg-blue-800",children:d?" Posting please wait":" Post"})]})})};var g=t(5565),h=t(4648),p=t(865),x=t(3258),m=t(3625);let v=e=>{let{product:a,onToggleFeatured:t,onDelete:r,loadingProductId:d,index:i}=e;return(0,s.jsxs)(l.P.tr,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.7,delay:.4*i,ease:"easeInOut"},className:"".concat(a.isFeatured?"bg-slate-900":""),children:[(0,s.jsx)("td",{className:"p-4 hidden md:table-cell",children:(0,s.jsx)(g.default,{width:80,height:90,src:a.image||"/default-image.jpg",alt:"product-image of ".concat(a.name),className:"h-[90px] object-cover"})}),(0,s.jsx)("td",{className:"p-2 font-semibold text-md",children:a.name}),(0,s.jsx)("td",{className:"p-2 text-sm text-gray-500",children:(0,m.E)(a.description,50)}),(0,s.jsx)("td",{className:"p-2 text-sm text-gray-500",children:a.category}),(0,s.jsxs)("td",{className:"p-2 text-lg font-semibold text-success",children:["$",a.price]}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>t(a._id),title:"Toggle Featured Product",className:" p-2 rounded-full hover:text-accent hover:scale-105 ".concat(a.isFeatured?"text-accent border-accent":"text-neutral border-neutral"),children:d===a._id?(0,s.jsx)(h.A,{}):(0,s.jsx)(p.A,{size:20})})}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>r(a._id),className:"text-sm text-white bg-blue-500  p-2  rounded-full hover:bg-error hover:text-neutral",children:(0,s.jsx)(x.A,{size:20})})})]})},j=()=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex p-4 items-center justify-between animate-pulse",children:[(0,s.jsx)("div",{className:"w-[80px] h-[90px] bg-gray-300 rounded"}),(0,s.jsxs)("div",{className:"w-full ml-4",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/2 mb-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded w-1/4"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsx)("div",{className:"h-6 w-12 bg-gray-300 rounded mb-2"}),(0,s.jsx)("div",{className:"h-6 w-12 bg-gray-300 rounded"})]})]})}),y=()=>{let{getAllProducts:e,products:a,toggleFeaturedProduct:t,deleteProduct:d,loading:i,loadingProductId:c}=(0,o.z)(),n=(0,r.useCallback)(()=>{e()},[e]);(0,r.useEffect)(()=>{n()},[n]);let u=async e=>{await t(e),n()},g=async e=>{await d(e),n()};return(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3,ease:"easeInOut"},className:"px-4 py-4 shadow-lg bg-slate-800 w-full max-w-2xl",children:[i&&(0,s.jsx)(j,{}),i||0!==a.length?(0,s.jsxs)("table",{className:"w-full mx-auto text-center text-gray-300",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"hidden md:table-cell",children:"Image"}),(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Description"}),(0,s.jsx)("th",{children:"Category"}),(0,s.jsx)("th",{children:"Price"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:a.map((e,a)=>(0,s.jsx)(v,{product:e,onToggleFeatured:u,onDelete:g,loadingProductId:c,index:a},a))})]}):(0,s.jsx)("p",{className:"text-center text-gray-300 w-full",children:"No products found"})]})};var b=t(5781),f=t(6472),N=t(4922),w=t(5086);b.t1.register(b.PP,b.kc,b.FN,b.No,b.hE,b.m_,b.s$);let P=()=>{let[e,a]=(0,r.useState)({users:0,products:0,totalSales:0,totalRevenue:0}),[t,l]=(0,r.useState)([]),[d,i]=(0,r.useState)(!0),o={labels:t.map(e=>e.date),datasets:[{label:"Sales",data:t.map(e=>e.sales),borderColor:"green",backgroundColor:"green",fill:!0},{label:"Revenue",data:t.map(e=>e.revenue),borderColor:"blue",backgroundColor:"blue",fill:!0}]};return((0,r.useEffect)(()=>{(async()=>{try{let e=await N.A.get("/analytics");a(e.data.analyticsData),l(e.data.dailySalesData)}catch(e){console.error(e,"error fetching analytics data")}finally{i(!1)}})()},[]),d)?(0,s.jsx)("div",{children:(0,s.jsx)(w.A,{})}):(0,s.jsxs)("div",{className:" max-w-4xl mx-auto space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2  gap-2 border  border-teal-500",children:[(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("h2",{className:"text-md",children:"Total Users"}),(0,s.jsx)("p",{children:e.users})]}),(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("h2",{className:"text-md",children:"Total Products"}),(0,s.jsx)("p",{children:e.products})]}),(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("h2",{className:"text-md",children:"Total Sales"}),(0,s.jsx)("p",{children:e.totalSales})]}),(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("h2",{className:"text-md",children:"Total Revenue"}),(0,s.jsxs)("p",{children:["$",e.totalRevenue.toFixed(2)]})]})]}),(0,s.jsx)("div",{className:"p-4 border border-teal-500",children:(0,s.jsx)(f.N1,{height:300,width:600,data:o,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Daily Sales and Revenue"}}},className:"w-full"})})]})};var A=t(6046),R=t(9005);let k=()=>{let[e,a]=(0,r.useState)("create"),{user:t}=(0,R.k)();return(0,A.useRouter)(),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeInOut"},children:(0,s.jsx)("h1",{className:"text-xl md:text-4xl mb-5 text-center",children:"Admin Panel"})}),(0,s.jsx)("div",{className:"flex justify-center gap-4 mb-5",children:n.v.map(t=>(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2,ease:"easeInOut"},children:(0,s.jsxs)(d.A,{onClick:()=>a(t.id),variant:"contained",color:"success",className:"flex items-center gap-2",sx:{backgroundColor:e===t.id?"purple":"darkgreen"},children:[(0,s.jsx)(t.icon,{size:20}),t.label]})},t.id))}),(0,s.jsxs)("div",{className:"flex justify-center mt-10",children:["create"===e&&(0,s.jsx)(u,{}),"products"===e&&(0,s.jsx)(y,{}),"analitics"===e&&(0,s.jsx)(P,{})]})]})}},5086:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(5155);function r(){return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-40",children:(0,s.jsxs)("div",{className:"relative w-16 h-16",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-gray-700 border-t-indigo-500 animate-spin"}),(0,s.jsx)("div",{className:"absolute inset-4 rounded-full border-4 border-gray-800 border-t-indigo-500 animate-spin-slow"})]})})}},4648:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(5155);t(2115);let r=e=>{let{size:a="sm",color:t="text-white"}=e;return(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full border-2 border-solid border-current border-r-transparent ".concat({sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[a]," ").concat(t),role:"status"})}},4922:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=t(2651).A.create({baseURL:"http://localhost:2000/api",headers:{"Content-Type":"application/json"},withCredentials:!0})},5619:(e,a,t)=>{"use strict";t.d(a,{Q:()=>d,v:()=>i});var s=t(3473),r=t(8701),l=t(3950);let d=[{cat:"suits",image:"/categories/suits.jpg"},{cat:"t-shirts",image:"/categories/t-shirt.jpg"},{cat:"jeans",image:"/categories/jeans.jpg"},{cat:"dress",image:"/categories/dress.jpg"},{cat:"trousers",image:"/categories/pants.jpg"},{cat:"blouses",image:"/categories/blouse.jpg"}],i=[{id:"create",label:"Create",icon:s.A},{id:"products",label:"Products",icon:r.A},{id:"analitics",label:"Analytics",icon:l.A}]},3625:(e,a,t)=>{"use strict";t.d(a,{E:()=>s});let s=(e,a)=>(null==e?void 0:e.length)>a?e.substring(0,a)+"... ":e},9647:(e,a,t)=>{"use strict";t.d(a,{z:()=>d});var s=t(9827),r=t(4922),l=t(1068);let d=(0,s.v)((e,a)=>({products:[],setProducts:a=>e({products:a}),loading:!1,loadingProductId:null,createProduct:async a=>{e({loading:!0});try{let t=await r.A.post("/products/create",a);e(e=>({products:[...e.products,t.data]})),l.oR.success("Product created successfully"),e({loading:!1})}catch(a){var t,s;e({loading:!1}),l.oR.error((null===(s=a.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Product creation failed")}},getAllProducts:async()=>{e({loading:!0});try{let a=await r.A.get("/products");return e({products:a.data.products,loading:!1}),a.data}catch(s){var a,t;e({loading:!1}),l.oR.error((null===(t=s.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Product creation failed")}},deleteProduct:async a=>{e({loading:!0});try{await r.A.delete("/products/delete/".concat(a)),e(e=>({products:e.products.filter(e=>e._id!==a)})),l.oR.success("Product deleted successfully"),e({loading:!1})}catch(a){var t,s;console.log(a),e({loading:!1}),l.oR.error((null===(s=a.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Product deletion failed")}},toggleFeaturedProduct:async a=>{e({loadingProductId:a}),e({loading:!0});try{let t=await r.A.patch("/products/toggle-featured/".concat(a));e(e=>({products:e.products.map(e=>e._id===a?t.data:e)})),l.oR.success("Product updated successfully"),e({loadingProductId:null}),e({loading:!1})}catch(a){var t,s;e({loading:!1}),l.oR.error((null===(s=a.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Product update failed")}},getProductByCategory:async a=>{try{e({loading:!0});let t=await r.A.get("/products/".concat(a));return e({loading:!1}),e({products:t.data.products}),t.data.products}catch(a){var t,s;e({loading:!1}),l.oR.error((null===(s=a.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"ERR_NETWORK")}},getFeaturedProducts:async()=>{try{e({loading:!0});let a=await r.A.get("/products/featured");console.log(a.data),e({products:a.data}),e({loading:!1})}catch(s){var a,t;e({loading:!1}),l.oR.error((null===(t=s.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"ERR_NETWORK")}},resetProducts:()=>{e({products:[]})}}))},9005:(e,a,t)=>{"use strict";t.d(a,{k:()=>d});var s=t(9827),r=t(4922),l=t(1068);let d=(0,s.v)((e,a)=>({user:null,loading:!1,checkingAuth:!1,signup:async a=>{let{name:t,email:s,password:d}=a;e({loading:!0});try{let a=await r.A.post("/auth/signup",{name:t,email:s,password:d});l.oR.success(a.data||"Signup successful"),e({user:a.data.user,loading:!1})}catch(a){var i,o,c;e({loading:!1}),(null===(i=a.response)||void 0===i?void 0:i.status)===400?l.oR.error("User already exists"):l.oR.error((null===(c=a.response)||void 0===c?void 0:null===(o=c.data)||void 0===o?void 0:o.message)||"Signup failed")}},login:async a=>{let{email:t,password:s}=a;e({loading:!0});try{let a=await r.A.post("/auth/login",{email:t,password:s});l.oR.success("You are logged in as ".concat(a.data.user.role)),e({user:a.data.user,loading:!1})}catch(a){var d,i;e({loading:!1}),l.oR.error((null===(i=a.response)||void 0===i?void 0:null===(d=i.data)||void 0===d?void 0:d.message)||"Login failed")}},checkAuth:async()=>{e({checkingAuth:!0});try{let a=await r.A.get("/auth/profile");e({user:a.data.user,checkingAuth:!1}),e({loading:!1})}catch(a){e({user:null,checkingAuth:!1}),e({loading:!1})}},logout:async()=>{e({loading:!0});try{await r.A.post("/auth/logout"),l.oR.success("Logout successful"),e({user:null,loading:!1})}catch(s){var a,t;e({loading:!1}),l.oR.error((null===(t=s.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Logout failed")}}}))}},e=>{var a=a=>e(e.s=a);e.O(0,[647,865,372,565,394,696,441,517,358],()=>a(5414)),_N_E=e.O()}]);