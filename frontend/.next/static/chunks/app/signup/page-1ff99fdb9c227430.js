(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{2065:(e,a,s)=>{Promise.resolve().then(s.bind(s,9944))},8818:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]])},8686:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},6046:(e,a,s)=>{"use strict";var t=s(6658);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},9944:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>v});var t=s(5155),i=s(2115),n=s(5565),l=s(8173),r=s.n(l);let d=(0,s(7401).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var o=s(8818),u=s(8686),c=s(9005),m=s(6046),h=s(1068),p=s(9675);let v=()=>{let[e,a]=(0,i.useState)({name:"",email:"",password:"",confirmPassword:""});console.log(e);let[s,l]=(0,i.useState)(""),v=e=>{let{name:s,value:t}=e.target;a(e=>({...e,[s]:t})),l("")},{signup:x,user:g}=(0,c.k)(),y=(0,m.useRouter)();(0,i.useEffect)(()=>{g&&y.push("/")},[g,y]);let f={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}};return(0,t.jsxs)("div",{className:"flex flex-col  md:flex-row h-screen w-screen",children:[(0,t.jsxs)(p.P.div,{variants:{hidden:{opacity:0,x:-40},visible:{opacity:1,x:0}},initial:"hidden",animate:"visible",transition:{duration:.8},className:"hidden md:block flex-1 relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-purple-900 opacity-30 z-10"}),(0,t.jsx)(n.default,{src:"/auth/signupbg.jpg",alt:"signup-banner",fill:!0,objectFit:"cover",objectPosition:" center",className:" "})]}),(0,t.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),e.password!==e.confirmPassword){h.oR.error("Passwords do not match");return}x(e)},className:"flex-1 flex flex-col justify-center items-center p-4 space-y-2 ",children:[(0,t.jsx)(p.P.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,t.jsx)("h2",{className:" text-2xl md:text-4xl font-bold text-center",children:"Sign Up"})}),(0,t.jsxs)(p.P.div,{variants:f,initial:"hidden",animate:"visible",transition:{duration:.5,delay:.4,ease:"easeInOut"},className:"flex items-center  w-full max-w-md  p-2 rounded-md",children:[(0,t.jsx)(d,{}),(0,t.jsx)("input",{type:"text",autoFocus:!0,id:"name",name:"name",value:e.name,onChange:v,placeholder:"User name",required:!0,minLength:"3",maxLength:"25"})]}),(0,t.jsxs)(p.P.div,{variants:f,initial:"hidden",animate:"visible",transition:{duration:.5,delay:.6,ease:"easeInOut"},className:"flex items-center w-full max-w-md p-2 rounded-md",children:[(0,t.jsx)(o.A,{}),(0,t.jsx)("input",{autoComplete:"on",type:"email",id:"email",name:"email",value:e.email,onChange:v,placeholder:"Email",required:!0,minLength:"6",maxLength:"100",title:"Please enter a valid email address"})]}),(0,t.jsxs)(p.P.div,{variants:f,initial:"hidden",animate:"visible",transition:{duration:.5,delay:1,ease:"easeInOut"},className:"flex items-center w-full max-w-md p-2 rounded-md",children:[(0,t.jsx)(u.A,{}),(0,t.jsx)("input",{type:"password",id:"password",value:e.password,onChange:v,placeholder:"Password",minLength:"8",maxLength:"30",name:"password",title:"Password must be at least 8 characters, including a number",required:!0})]}),(0,t.jsxs)(p.P.div,{variants:f,initial:"hidden",animate:"visible",transition:{duration:.5,delay:1.4,ease:"easeInOut"},className:"flex items-center w-full max-w-md p-2 rounded-md",children:[(0,t.jsx)(u.A,{}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",value:e.confirmPassword,onChange:v,placeholder:"Confirm Password",minLength:"8",maxLength:"30",name:"confirmPassword",required:!0})]}),s&&(0,t.jsx)("span",{className:"text-error text-sm",children:s}),(0,t.jsxs)(p.P.div,{variants:f,initial:"hidden",animate:"visible",transition:{duration:.5,delay:1.6,ease:"easeInOut"},children:[(0,t.jsx)("button",{type:"submit",className:"w-full  p-4 my-5  max-w-md py-2 bg-blue-600 rounded-md hover:bg-blue-800 transition",children:"Sign Up"}),(0,t.jsxs)("span",{className:"text-sm text-center py-4",children:["Already have an account?",(0,t.jsx)(r(),{href:"/login",className:"text-blue-500 font-bold ml-2",children:"Login"})]})]})]})]})}},4922:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=s(2651).A.create({baseURL:"http://localhost:2000/api",headers:{"Content-Type":"application/json"},withCredentials:!0})},9005:(e,a,s)=>{"use strict";s.d(a,{k:()=>l});var t=s(9827),i=s(4922),n=s(1068);let l=(0,t.v)((e,a)=>({user:null,loading:!1,checkingAuth:!1,signup:async a=>{let{name:s,email:t,password:l}=a;e({loading:!0});try{let a=await i.A.post("/auth/signup",{name:s,email:t,password:l});n.oR.success(a.data||"Signup successful"),e({user:a.data.user,loading:!1})}catch(a){var r,d,o;e({loading:!1}),(null===(r=a.response)||void 0===r?void 0:r.status)===400?n.oR.error("User already exists"):n.oR.error((null===(o=a.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.message)||"Signup failed")}},login:async a=>{let{email:s,password:t}=a;e({loading:!0});try{let a=await i.A.post("/auth/login",{email:s,password:t});n.oR.success("You are logged in as ".concat(a.data.user.role)),e({user:a.data.user,loading:!1})}catch(a){var l,r;e({loading:!1}),n.oR.error((null===(r=a.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.message)||"Login failed")}},checkAuth:async()=>{e({checkingAuth:!0});try{let a=await i.A.get("/auth/profile");e({user:a.data.user,checkingAuth:!1}),e({loading:!1})}catch(a){e({user:null,checkingAuth:!1}),e({loading:!1})}},logout:async()=>{e({loading:!0});try{await i.A.post("/auth/logout"),n.oR.success("Logout successful"),e({user:null,loading:!1})}catch(t){var a,s;e({loading:!1}),n.oR.error((null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Logout failed")}}}))}},e=>{var a=a=>e(e.s=a);e.O(0,[865,372,565,173,441,517,358],()=>a(2065)),_N_E=e.O()}]);