(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{3172:(e,a,t)=>{Promise.resolve().then(t.bind(t,5597))},8818:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(7401).A)("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]])},8686:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(7401).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},6046:(e,a,t)=>{"use strict";var s=t(6658);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},5597:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var s=t(5155),i=t(2115),n=t(8818),l=t(8686),r=t(5565),o=t(8173),d=t.n(o),u=t(9675),c=t(6046),h=t(9005);let m=()=>{let[e,a]=(0,i.useState)({email:"",password:""}),[t,o]=(0,i.useState)(""),m=(0,c.useRouter)(),p=e=>{let{name:t,value:s}=e.target;a(e=>({...e,[t]:s})),o("")},{login:g,loading:v}=(0,h.k)(),{user:x}=(0,h.k)();(0,i.useEffect)(()=>{x&&m.push("/")},[x,m]);let y={hidden:{opacity:0,x:-40},visible:{opacity:1,x:0}};return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row h-screen  w-screen",children:[(0,s.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),!e.email||!e.password){o("Email and Password are required");return}g(e)},className:"flex-1 flex flex-col justify-center items-center p-4 space-y-2",children:[(0,s.jsx)(u.P.div,{initial:{opacity:0,x:-40},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2,ease:"easeInOut"},children:(0,s.jsx)("h2",{className:"text-3xl text-center",children:"Login"})}),(0,s.jsxs)(u.P.div,{variants:y,initial:"hidden",animate:"visible",transition:{duration:.4,delay:.5,ease:"easeOut"},className:"flex items-center w-full max-w-md p-2 rounded-md",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("input",{autoSave:"on",autoFocus:!0,type:"email",id:"email",name:"email",value:e.email,onChange:p,placeholder:"Email",required:!0,minLength:"6",maxLength:"100",pattern:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",title:"Please enter a valid email address"})]}),(0,s.jsxs)(u.P.div,{variants:y,initial:"hidden",animate:"visible",transition:{duration:.4,delay:.8,ease:"easeOut"},className:"flex items-center w-full max-w-md p-2 rounded-md",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("input",{autoSave:"on",type:"password",id:"password",value:e.password,onChange:p,placeholder:"Password",name:"password",required:!0})]}),t&&(0,s.jsx)("span",{className:"text-error text-sm",children:t}),(0,s.jsxs)(u.P.div,{variants:y,initial:"hidden",animate:"visible",transition:{duration:.4,delay:1.2,ease:"easeOut"},children:[(0,s.jsx)("button",{type:"submit",className:"w-full p-4 my-5 max-w-md py-2 bg-blue-600 rounded-md hover:bg-blue-800 transition",children:v?"Loading...":"Login"}),(0,s.jsxs)("span",{className:"text-sm text-center py-4",children:["Do not have an account?",(0,s.jsx)(d(),{href:"/signup",className:" text-blue-500 font-bold ml-2",children:"Sign Up"})]})]})]}),(0,s.jsxs)(u.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2,ease:"easeOut"},className:"hidden md:flex flex-1  relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-purple-900 opacity-40 z-10"}),(0,s.jsx)(r.default,{src:"/auth/login-bg.jpg",alt:"login-page-photo",fill:!0,className:"object-cover",objectPosition:"center"})]})]})}},4922:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=t(2651).A.create({baseURL:"http://localhost:2000/api",headers:{"Content-Type":"application/json"},withCredentials:!0})},9005:(e,a,t)=>{"use strict";t.d(a,{k:()=>l});var s=t(9827),i=t(4922),n=t(1068);let l=(0,s.v)((e,a)=>({user:null,loading:!1,checkingAuth:!1,signup:async a=>{let{name:t,email:s,password:l}=a;e({loading:!0});try{let a=await i.A.post("/auth/signup",{name:t,email:s,password:l});n.oR.success(a.data||"Signup successful"),e({user:a.data.user,loading:!1})}catch(a){var r,o,d;e({loading:!1}),(null===(r=a.response)||void 0===r?void 0:r.status)===400?n.oR.error("User already exists"):n.oR.error((null===(d=a.response)||void 0===d?void 0:null===(o=d.data)||void 0===o?void 0:o.message)||"Signup failed")}},login:async a=>{let{email:t,password:s}=a;e({loading:!0});try{let a=await i.A.post("/auth/login",{email:t,password:s});n.oR.success("You are logged in as ".concat(a.data.user.role)),e({user:a.data.user,loading:!1})}catch(a){var l,r;e({loading:!1}),n.oR.error((null===(r=a.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.message)||"Login failed")}},checkAuth:async()=>{e({checkingAuth:!0});try{let a=await i.A.get("/auth/profile");e({user:a.data.user,checkingAuth:!1}),e({loading:!1})}catch(a){e({user:null,checkingAuth:!1}),e({loading:!1})}},logout:async()=>{e({loading:!0});try{await i.A.post("/auth/logout"),n.oR.success("Logout successful"),e({user:null,loading:!1})}catch(s){var a,t;e({loading:!1}),n.oR.error((null===(t=s.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Logout failed")}}}))}},e=>{var a=a=>e(e.s=a);e.O(0,[865,372,565,173,441,517,358],()=>a(3172)),_N_E=e.O()}]);