(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{2303:(e,t,s)=>{Promise.resolve().then(s.bind(s,2255))},2255:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var r,a=s(5155),n=s(2115),l=s(9675),i=s(7401);let c=(0,i.A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var d=s(5565),o=s(8173),m=s.n(o),u=s(4648),x=s(8197);let h=e=>{let{cart:t,decrementItemQuantity:s,deleteItemFromCart:r,incrementItemQuantity:l,isLoadingId:i}=e,{getCartItems:o}=(0,x.x)();return(0,n.useEffect)(()=>{0===t.quantity&&r(t),o()},[t.quantity,r,o,t]),(0,a.jsxs)("div",{className:"relative rounded-lg p-4 mb-2 shadow-sm bg-slate-800 md:p-6",children:[(0,a.jsxs)("div",{className:"space-y-2 md:flex md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,a.jsx)(m(),{href:"#",className:"w-20",children:(0,a.jsx)(d.default,{width:100,height:100,className:"max-h-50 max-w-30",src:t.image,alt:"image of iPhone",style:{objectFit:"cover",objectPosition:"center"}})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("h5",{className:"text-md",children:t.name})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between md:justify-end",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>s(t),type:"button",className:"hover:bg-slate-700 h-10 w-10 items-center justify-center rounded-md border border-slate-700",children:"-"}),(0,a.jsx)("input",{type:"text",className:"w-10 border-0 bg-transparent text-center text-sm font-medium focus:outline-none focus:ring-0",value:t.quantity,readOnly:!0}),(0,a.jsx)("button",{onClick:()=>l(t),type:"button",className:"hover:bg-slate-700 h-10 w-10 items-center justify-center rounded-md border border-slate-700",children:"+"})]}),(0,a.jsx)("div",{className:"text-end md:w-32",children:(0,a.jsxs)("p",{className:"text-base font-bold ",children:["$",t.price]})})]})]}),(0,a.jsx)("button",{onClick:()=>r(t),type:"button",className:"text-red-600  hover:text-red-700 absolute top-3 right-5",children:i&&t._id?(0,a.jsx)(u.A,{}):(0,a.jsx)(c,{size:20})})]})};var f=s(6394),p="https://js.stripe.com/v3",j=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,v=function(){for(var e=document.querySelectorAll('script[src^="'.concat(p,'"]')),t=0;t<e.length;t++){var s=e[t];if(j.test(s.src))return s}return null},y=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(p).concat(t);var r=document.head||document.body;if(!r)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(s),s},g=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.2.0",startTime:t})},w=null,b=null,N=null,k=function(e,t,s){if(null===e)return null;var r=e.apply(void 0,t);return g(r,s),r},E=!1,P=function(){return r||(r=(null!==w?w:(w=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var s,r=v();r?r&&null!==N&&null!==b&&(r.removeEventListener("load",N),r.removeEventListener("error",b),null===(s=r.parentNode)||void 0===s||s.removeChild(r),r=y(null)):r=y(null),N=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},b=function(){t(Error("Failed to load Stripe.js"))},r.addEventListener("load",N),r.addEventListener("error",b)}catch(e){t(e);return}})).catch(function(e){return w=null,Promise.reject(e)})).catch(function(e){return r=null,Promise.reject(e)}))};Promise.resolve().then(function(){return P()}).catch(function(e){E||console.warn(e)});var S=s(4922);let A=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];E=!0;var r=Date.now();return P().then(function(e){return k(e,t,r)})}("pk_test_51QU2T5KY7H7Lk4EThg0mHeBbjATWMJJXrU29WxfKFmYLroSaFJyp2GJAADVMGkXKFgFTLmhy5PzYk17dnNT81iJG00354ogQjh"),C=()=>{let{cart:e,coupon:t,subtotal:s,total:r}=(0,x.x)(),n=async()=>{try{let s=await A;if(!s)throw Error("Stripe failed to initialize. Please try again later.");if(!Array.isArray(e)||0===e.length)throw Error("Your cart is empty. Please add products to proceed.");let r=(await S.A.post("/payments/create-checkout-session",{products:e,couponCode:t?null==t?void 0:t.code:null})).data;if(!r.id)throw Error("Failed to create a checkout session. Please try again.");let{error:a}=await s.redirectToCheckout({sessionId:r.id});a&&alert("There was an issue redirecting to the payment page. Please try again.")}catch(e){alert(e.message)}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-4 rounded-lg  bg-slate-800 p-4 shadow-sm  sm:p-6",children:[(0,a.jsx)("p",{className:"text-xl font-semibold ",children:"Order summary"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("dl",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("dt",{className:"text-base font-normal text-gray-400",children:"Original price"}),(0,a.jsxs)("dd",{className:"text-base font-medium text-white",children:["$",s]})]}),(0,a.jsxs)("dl",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("dt",{className:"text-base font-normal text-gray-400",children:"Discount"}),(0,a.jsx)("dd",{className:"text-base font-medium text-green-600",children:t})]})]}),(0,a.jsxs)("dl",{className:"flex items-center justify-between gap-4 border-t pt-2 border-slate-900",children:[(0,a.jsx)("dt",{className:"text-lg font-bold",children:"Total"}),(0,a.jsxs)("dd",{className:"text-lg font-bold underline underline-offset-8",children:["$",r]})]})]}),(0,a.jsx)(f.A,{variant:"contained",color:"success",onClick:n,href:"#",className:"flex  w-full items-center justify-center hover:text-accent  py-2 text-sm ",children:"Proceed to Checkout"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-normal text-gray-400",children:"or"}),(0,a.jsx)(m(),{href:"/",className:"inline-flex items-center gap-2  hover:text-accent",children:"Continue Shopping"})]})]})})};var F=s(8474);let _=(0,i.A)("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]),L=()=>(0,a.jsx)("div",{className:"flex justify-center items-center mt-12 ",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(F.A,{size:150,className:"mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Your Cart is Empty"}),(0,a.jsxs)(m(),{href:"/",className:"mt-3 hover:scale-105 flex items-center gap-2 text-accent",children:["Start shopping ",(0,a.jsx)(_,{})]})]})});var T=s(6440);let M=()=>{var e;let{updateQuantity:t,addToCart:s,deleteFromCart:r,cart:i,coupon:c,total:d,subtotal:o,getCartItems:m,isLoadingId:u,recomendations:f,fetchRecomendation:p}=(0,x.x)();(0,n.useEffect)(()=>{m(),p()},[i.quantity,m,p]);let j=e=>{s(e)},v=e=>{t(e)},y=async e=>{await r(e),m()};return(0,a.jsxs)("div",{children:[(0,a.jsx)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2,ease:"easeInOut"},children:(0,a.jsx)("h1",{className:"text-xl md:text-4xl mb-5 text-center capitalize",children:"Shopping Cart"})}),(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4,ease:"easeInOut"},className:"flex flex-col md:flex-row gap-4 lg:max-w-[90%] lg:mx-auto justify-center px-4",children:0===i.length?(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(L,{})}):(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"w-full max-w-2xl mx-auto",children:i.map((e,t)=>(0,a.jsx)(h,{cart:e,incrementItemQuantity:j,decrementItemQuantity:v,deleteItemFromCart:y,isLoadingId:u},t))}),(0,a.jsx)("div",{className:"w-full max-w-xl md:max-w-lg mx-auto flex flex-col gap-4",children:(0,a.jsx)(C,{coupon:c,total:d,subtotal:o})})]}),(0,a.jsxs)("div",{className:"hidden xl:mt-8 md:block",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-center mt-8",children:"People also bought"}),(0,a.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-5 overflow-auto max-w-2xl",children:null===(e=f.recommendations)||void 0===e?void 0:e.map((e,t)=>(0,a.jsx)(T.A,{product:e,index:t,size:"small"},t))})]})]})})]})}},4648:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(5155);s(2115);let a=e=>{let{size:t="sm",color:s="text-white"}=e;return(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full border-2 border-solid border-current border-r-transparent ".concat({sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t]," ").concat(s),role:"status"})}}},e=>{var t=t=>e(e.s=t);e.O(0,[865,372,565,173,394,869,273,440,441,517,358],()=>t(2303)),_N_E=e.O()}]);