(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{7611:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,8173,23)),Promise.resolve().then(a.t.bind(a,3886,23)),Promise.resolve().then(a.bind(a,5654)),Promise.resolve().then(a.bind(a,8270)),Promise.resolve().then(a.t.bind(a,347,23))},5340:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6046:(e,t,a)=>{"use strict";var s=a(6658);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},5654:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var s=a(5155),o=a(6046),r=a(1068);a(5716);var l=a(9005),n=a(5086),i=a(2115);a(6668);var c=a(9675);let d=e=>{let{children:t}=e;(0,o.useRouter)();let{checkingAuth:a,loading:d,checkAuth:u,user:p}=(0,l.k)();(0,i.useEffect)(()=>{u()},[u]);let h=(0,o.usePathname)(),m="/signup"===h||"/login"===h;return(0,s.jsxs)("div",{className:"min-h-screen ".concat(m?"pt-0":"pt-10"," bg-gradient-to-t from-background to-foreground\n        text-white relative overflow-hidden"),children:[(a||d)&&(0,s.jsx)(n.A,{}),(0,s.jsx)(r.N9,{newestOnTop:!0,rtl:!1,closeOnClick:!0,hideProgressBar:!1,closeButton:!0,draggable:!0,limit:2,position:"bottom-left",autoClose:2e3,pauseOnFocusLoss:!1,pauseOnHover:!0,theme:"colored"}),(0,s.jsx)(c.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5,ease:"easeInOut"},className:"".concat(m?"pb-0":"pb-10"),children:t},h)]})}},5086:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(5155);function o(){return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-40",children:(0,s.jsxs)("div",{className:"relative w-16 h-16",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-gray-700 border-t-indigo-500 animate-spin"}),(0,s.jsx)("div",{className:"absolute inset-4 rounded-full border-4 border-gray-800 border-t-indigo-500 animate-spin-slow"})]})})}},8270:(e,t,a)=>{"use strict";a.d(t,{default:()=>v});var s=a(5155),o=a(8173),r=a.n(o);a(2115);var l=a(6046),n=a(7401);let i=(0,n.A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var c=a(8474);let d=(0,n.A)("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),u=(0,n.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),p=(0,n.A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var h=a(6394),m=a(9005),g=a(8197),x=a(5565);let v=()=>{let e=(0,l.usePathname)(),{user:t,logout:a}=(0,m.k)(),{cart:o}=(0,g.x)();return"/login"===e||"/signup"===e?null:(0,s.jsx)("nav",{className:"text-neutral nav-bar p-4 h-[80px] drop-shadow-2xl border-b border-primary relative z-50",children:(0,s.jsxs)("div",{className:" flex justify-between items-center w-full md:w-[80%] mx-auto ",children:[(0,s.jsxs)("div",{className:" flex items-center text-2xl",children:[(0,s.jsx)(r(),{href:"/",children:(0,s.jsx)(x.default,{width:50,height:50,src:"/logotip.png",alt:"logotip",className:"w-12 h-12"})}),(0,s.jsxs)(r(),{href:"/",className:"hidden md:flex items-center no-hover-link",children:[(0,s.jsx)("span",{className:"text-4xl font-bold text-accent",children:"Shop"}),(0,s.jsx)("span",{className:"text-4xl font-bold text-success mr-1",children:"per"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(null==t?void 0:t.role)==="customer"&&(0,s.jsxs)(r(),{href:"/saved",className:"flex items-center",children:[(0,s.jsx)(i,{className:" mr-1"}),"Saved"]}),(null==t?void 0:t.role)==="customer"&&(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)(r(),{href:"/cart",className:" flex items-center cart-link",children:[(0,s.jsx)(c.A,{className:" mr-1"}),"Cart",(0,s.jsx)("span",{className:"w-[22px] h-[22px] rounded-full bg-success opacity-[90%] absolute bottom-[-10px] right-[-10px]  text-center ",children:(null==o?void 0:o.length)||0})]})}),t?(0,s.jsxs)("div",{className:"flex space-x-2",children:["admin"===t.role&&(0,s.jsxs)(r(),{href:"/admin",className:"no-hover-link border border-success\n                   hover:bg-success flex items-center\n                    px-4 py-2 rounded-md  ".concat("/admin"===e?"bg-success":""),children:[(0,s.jsx)(d,{})," ",(0,s.jsx)("span",{className:"mx-1",children:"Admin"})]}),(0,s.jsx)(h.A,{onClick:a,color:"error",variant:"outlined",children:(0,s.jsx)("span",{className:"flex  duration-200  ease-out hover:scale-90",children:(0,s.jsx)(u,{})})})]}):(0,s.jsxs)(r(),{href:"/login",className:" flex items-center",children:[(0,s.jsx)(p,{className:"mr-1"}),"Log In"]})]})]})})}},6668:(e,t,a)=>{"use strict";a.d(t,{A:()=>j});var s=a(5155),o=a(2115),r=a(2986),l=a(3463),n=a(3166),i=a(1157),c=a(2611),d=a(2879),u=a(2795),p=a(9617),h=a(6366);let m=(0,a(1045).A)("MuiBox",["root"]),g=(0,p.A)(),x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{themeId:t,defaultTheme:a,defaultClassName:r="MuiBox-root",generateClassName:u}=e,p=(0,n.Ay)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(i.A);return o.forwardRef(function(e,o){let n=(0,d.A)(a),{className:i,component:h="div",...m}=(0,c.A)(e);return(0,s.jsx)(p,{as:h,ref:o,className:(0,l.A)(i,u?u(r):r),theme:t&&n[t]||n,...m})})}({themeId:h.A,defaultTheme:g,defaultClassName:m.root,generateClassName:u.A.generate});var v=a(1348),y=a(6394),f=a(9675),A=a(6046),b=a(5340);let j=e=>{let{isOpen:t,setIsOpen:a,closeModal:o}=e,l=(0,A.useRouter)();return(0,s.jsx)(r.A,{open:t,onClose:()=>a(!1),children:(0,s.jsxs)(x,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"text.primary",width:400,height:200,bgcolor:"background.paper",borderRadius:"10px",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,s.jsx)(v.A,{variant:"h5",component:"h5",children:"You are not signed in"}),(0,s.jsx)(v.A,{sx:{mt:2},children:"Please sign up to continue using the application."}),(0,s.jsx)(f.P.div,{initial:{opacity:1},animate:{opacity:1,scale:[1,1.05,1]},transition:{duration:.4,delay:.5,ease:"easeInOut",repeat:1/0,repeatDelay:1},children:(0,s.jsx)(y.A,{sx:{mt:2},variant:"contained",onClick:()=>{l.push("/login"),a(!1)},children:"Go to Sign Up"})}),(0,s.jsx)("button",{onClick:o,className:"absolute text-error top-2 right-3 p-2 ",children:(0,s.jsx)(b.A,{})})]})})}},4922:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=a(2651).A.create({baseURL:"http://localhost:2000/api",headers:{"Content-Type":"application/json"},withCredentials:!0})},8197:(e,t,a)=>{"use strict";a.d(t,{x:()=>l});var s=a(9827),o=a(4922),r=a(1068);let l=(0,s.v)((e,t)=>({cart:[],coupon:null,total:0,subtotal:0,isCouponApplied:!1,isLoadingId:null,recomendations:[],getMyCoupon:async()=>{try{let t=await o.A.get("/coupons");e({coupon:t.data.coupon})}catch(e){var t,a;r.oR.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to get coupon")}},applyCoupon:async a=>{try{let s=await o.A.post("/coupons/validate",{code:a});e({coupon:s.data,isCouponApplied:!0}),t().calculateTotals(),r.oR.success("Coupon applied successfully")}catch(e){var s,l;r.oR.error((null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)||"Failed to apply coupon")}},removeCoupon:()=>{e({coupon:null,isCouponApplied:!1}),t().calculateTotals(),r.oR.success("Coupon removed")},getCartItems:async()=>{try{let a=await o.A.get("/cart/get");e({cart:a.data.cartItems||[]}),t().calculateTotals()}catch(t){e({cart:[]}),r.oR.error(t.response.data.message||"An error occurred")}},clearCart:async()=>{e({cart:[],coupon:null,total:0,subtotal:0})},addToCart:async a=>{try{await o.A.post("/cart/add",{productId:a._id}),e(e=>({cart:e.cart.find(e=>e._id===a._id)?e.cart.map(e=>e._id===a._id?{...e,quantity:e.quantity+1}:e):[...e.cart,{...a,quantity:1}]})),t().calculateTotals()}catch(e){r.oR.error(e.response.data.message||"An error occurred")}},deleteFromCart:async a=>{try{e({isLoadingId:a._id}),e(e=>({cart:e.cart.filter(e=>e._id!==a.id)})),await o.A.delete("/cart/delete",{data:{productId:a._id}}),e({isLoadingId:null}),t().calculateTotals(),t().getCartItems()}catch(e){r.oR.error(e.response.data.message||"An error occurred")}},updateQuantity:async a=>{try{e(e=>({cart:e.cart.map(e=>e._id===a._id?{...e,quantity:a.quantity}:e)})),await o.A.put("/cart/update/".concat(a._id)),t().calculateTotals(),t().getCartItems()}catch(e){}},calculateTotals:()=>{let{cart:a,coupon:s}=t(),o=a.reduce((e,t)=>e+t.price*t.quantity,0),r=o;if(s){let e=o*(s.discountPercentage/100);r=o-e}e({subtotal:o,total:r})},deleteCartOnPurchase:async()=>{try{await o.A.delete("/cart/on-success/delete"),r.oR.success("Cart cleared")}catch(e){r.oR.error(e.message),console.log(e)}},fetchRecomendation:async()=>{try{let t=await o.A.get("/products/get/recommendations");e({recomendations:t.data}),console.log(t.data)}catch(e){console.log(e),r.oR.error(e.message)}}}))},9005:(e,t,a)=>{"use strict";a.d(t,{k:()=>l});var s=a(9827),o=a(4922),r=a(1068);let l=(0,s.v)((e,t)=>({user:null,loading:!1,checkingAuth:!1,signup:async t=>{let{name:a,email:s,password:l}=t;e({loading:!0});try{let t=await o.A.post("/auth/signup",{name:a,email:s,password:l});r.oR.success(t.data||"Signup successful"),e({user:t.data.user,loading:!1})}catch(t){var n,i,c;e({loading:!1}),(null===(n=t.response)||void 0===n?void 0:n.status)===400?r.oR.error("User already exists"):r.oR.error((null===(c=t.response)||void 0===c?void 0:null===(i=c.data)||void 0===i?void 0:i.message)||"Signup failed")}},login:async t=>{let{email:a,password:s}=t;e({loading:!0});try{let t=await o.A.post("/auth/login",{email:a,password:s});r.oR.success("You are logged in as ".concat(t.data.user.role)),e({user:t.data.user,loading:!1})}catch(t){var l,n;e({loading:!1}),r.oR.error((null===(n=t.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)||"Login failed")}},checkAuth:async()=>{e({checkingAuth:!0});try{let t=await o.A.get("/auth/profile");e({user:t.data.user,checkingAuth:!1}),e({loading:!1})}catch(t){e({user:null,checkingAuth:!1}),e({loading:!1})}},logout:async()=>{e({loading:!0});try{await o.A.post("/auth/logout"),r.oR.success("Logout successful"),e({user:null,loading:!1})}catch(s){var t,a;e({loading:!1}),r.oR.error((null===(a=s.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Logout failed")}}}))},5716:()=>{},347:()=>{},3886:e=>{e.exports={style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontStyle:"normal"},className:"__className_548c62"}}},e=>{var t=t=>e(e.s=t);e.O(0,[946,865,372,565,173,394,869,441,517,358],()=>t(7611)),_N_E=e.O()}]);